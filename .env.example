# ==============================================================================
# Environment Configuration - Artisan Commerce
#
# Copy this file to .env and fill in your values:
#   cp .env.example .env
#
# .env is gitignored and should NEVER be committed.
# This file (.env.example) IS committed -- it documents every variable.
# ==============================================================================

# ------------------------------------------------------------------------------
# Application
# ------------------------------------------------------------------------------

# The environment this instance is running in.
# Values: development | test | production
NODE_ENV=development

# Base URL for the application (used in emails, redirects)
# Local: http://localhost:3000
# Production: https://artisan-commerce.com
APP_BASE_URL=http://localhost:3000

# ------------------------------------------------------------------------------
# Cloudflare
# ------------------------------------------------------------------------------

# Cloudflare Account ID (required)
# Find at: https://dash.cloudflare.com → Account → Account ID
CLOUDFLARE_ACCOUNT_ID=

# Cloudflare API Token (required)
# Create at: https://dash.cloudflare.com/profile/api-tokens
# Permissions needed: Account.Cloudflare Pages (Edit), Account.D1 (Edit), 
#                     Account.Workers Scripts (Edit), Zone.DNS (Edit)
CLOUDFLARE_API_TOKEN=

# Cloudflare Zone ID (required for custom domain)
# Find at: https://dash.cloudflare.com → Select domain → Overview → Zone ID
CLOUDFLARE_ZONE_ID=

# ------------------------------------------------------------------------------
# Authentication & Security
# ------------------------------------------------------------------------------

# Secret key for signing JWT tokens (required, min 32 chars)
# Generate with: openssl rand -hex 32
JWT_SECRET=

# JWT expiration time in seconds (optional, default: 86400 = 24 hours)
JWT_EXPIRY=86400

# Magic link expiration time in seconds (optional, default: 900 = 15 minutes)
MAGIC_LINK_EXPIRY=900

# Artisan allowed region (for geographic restriction)
# Values: utah | all (default: utah)
ARTISAN_ALLOWED_REGION=utah

# Rate limit for artisan sensitive operations (per hour)
# Default: 100 requests per hour
ARTISAN_RATE_LIMIT=100

# ------------------------------------------------------------------------------
# Adapter Selection (Provider Configuration)
# ------------------------------------------------------------------------------

# Email provider selection
# Values: resend | mailgun | postmark | sendgrid | mock | inmemory | recording | stub
# Default: resend
EMAIL_PROVIDER=resend

# Shipping provider selection
# Values: shippo | easypost | usps | mock | inmemory | recording | stub
# Default: shippo
SHIPPING_PROVIDER=shippo

# Payment provider selection
# Values: stripe | square | paypal | mock | inmemory | recording | stub
# Default: stripe
PAYMENT_PROVIDER=stripe

# Tax calculator selection
# Values: stripe-tax | taxjar | avalara | manual | mock | stub
# Default: stripe-tax
TAX_PROVIDER=stripe-tax

# File storage provider selection
# Values: r2 | s3 | gcs | local | inmemory
# Default: r2
STORAGE_PROVIDER=r2

# Translation provider selection
# Values: json | lokalise | phrase | crowdin | mock
# Default: json
TRANSLATION_PROVIDER=json

# ------------------------------------------------------------------------------
# Payment Processing (Stripe)
# ------------------------------------------------------------------------------

# Stripe secret key (required)
# Get from: https://dashboard.stripe.com/apikeys
# Use test key (sk_test_...) in development
STRIPE_SECRET_KEY=

# Stripe publishable key (required)
# Get from: https://dashboard.stripe.com/apikeys
# Use test key (pk_test_...) in development
STRIPE_PUBLISHABLE_KEY=

# Stripe webhook signing secret (required for webhook verification)
# Get from: https://dashboard.stripe.com/webhooks
STRIPE_WEBHOOK_SECRET=

# ------------------------------------------------------------------------------
# Email Service (Resend)
# ------------------------------------------------------------------------------

# Resend API Key (required if EMAIL_PROVIDER=resend)
# Sign up: https://resend.com/signup
# Free tier: 3000 emails/month
# Get key at: https://resend.com/api-keys
RESEND_API_KEY=

# From address for system emails (required)
# Must be verified in Resend dashboard
# Example: noreply@artisan-commerce.com
EMAIL_FROM_ADDRESS=

# From name for system emails (optional, default: "Artisan Commerce")
EMAIL_FROM_NAME=Artisan Commerce

# ------------------------------------------------------------------------------
# Shipping Service (Shippo)
# ------------------------------------------------------------------------------

# Shippo API Key (required if SHIPPING_PROVIDER=shippo)
# Sign up: https://goshippo.com/register
# Pricing: $0.05 per label
# Get key at: https://goshippo.com/user/apikeys
SHIPPO_API_KEY=

# ------------------------------------------------------------------------------
# Tax Calculation (Stripe Tax)
# ------------------------------------------------------------------------------

# Stripe Tax is included with Stripe account
# No additional API key needed
# Pricing: 0.5% of tax collected

# ------------------------------------------------------------------------------
# File Storage (Cloudflare R2)
# ------------------------------------------------------------------------------

# R2 is S3-compatible object storage from Cloudflare
# Free tier: 10GB storage, 10GB egress/month
# Create bucket at: https://dash.cloudflare.com → R2

# R2 Endpoint (required if STORAGE_PROVIDER=r2)
# Format: https://<account-id>.r2.cloudflarestorage.com
R2_ENDPOINT=

# R2 Access Key ID (required if STORAGE_PROVIDER=r2)
# Create at: https://dash.cloudflare.com → R2 → Manage R2 API Tokens
R2_ACCESS_KEY_ID=

# R2 Secret Access Key (required if STORAGE_PROVIDER=r2)
R2_SECRET_ACCESS_KEY=

# R2 Bucket Name (required if STORAGE_PROVIDER=r2)
# Example: bluebells-storage
R2_BUCKET_NAME=

# ------------------------------------------------------------------------------
# Queue Configuration
# ------------------------------------------------------------------------------

# Weekly production capacity in weight units (optional, default: 10)
# How many weight units can be completed per week
QUEUE_WEEKLY_CAPACITY=10

# Queue weight tiers (predefined, not configurable via env)
# XSmall = 1, Small = 2, Medium = 4, Large = 6, XLarge = 8

# ------------------------------------------------------------------------------
# Multi-Tenant Configuration
# ------------------------------------------------------------------------------

# Default tenant ID (for single-tenant deployment)
# In multi-tenant mode, this is determined by domain
DEFAULT_TENANT_ID=tenant_default

# ------------------------------------------------------------------------------
# Database (Cloudflare D1)
# ------------------------------------------------------------------------------

# D1 Database ID (set by Wrangler, not needed in .env)
# Created with: wrangler d1 create artisan-commerce-prod
# Binding configured in wrangler.toml

# ------------------------------------------------------------------------------
# Testing
# ------------------------------------------------------------------------------

# Test environment flag (automatically set by test runner)
# Values: true | false
# Default: false
IS_TEST=false

# Use mock adapters in tests (automatically set)
# Values: true | false
# Default: true in tests
USE_MOCK_ADAPTERS=true

# ------------------------------------------------------------------------------
# Development
# ------------------------------------------------------------------------------

# Enable debug logging (optional, default: false)
DEBUG=false

# Log level (optional, default: info)
# Values: debug | info | warn | error
LOG_LEVEL=info

# ------------------------------------------------------------------------------
# Optional: Alternative Email Providers
# ------------------------------------------------------------------------------

# Mailgun (if EMAIL_PROVIDER=mailgun)
MAILGUN_API_KEY=
MAILGUN_DOMAIN=

# Postmark (if EMAIL_PROVIDER=postmark)
POSTMARK_API_KEY=

# SendGrid (if EMAIL_PROVIDER=sendgrid)
SENDGRID_API_KEY=

# ------------------------------------------------------------------------------
# Optional: Alternative Shipping Providers
# ------------------------------------------------------------------------------

# EasyPost (if SHIPPING_PROVIDER=easypost)
EASYPOST_API_KEY=

# ------------------------------------------------------------------------------
# Optional: Alternative Tax Providers
# ------------------------------------------------------------------------------

# TaxJar (if TAX_PROVIDER=taxjar)
TAXJAR_API_KEY=

# Avalara (if TAX_PROVIDER=avalara)
AVALARA_ACCOUNT_ID=
AVALARA_LICENSE_KEY=

# ------------------------------------------------------------------------------
# Optional: Alternative Storage Providers
# ------------------------------------------------------------------------------

# AWS S3 (if STORAGE_PROVIDER=s3)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=
AWS_S3_BUCKET=

# Google Cloud Storage (if STORAGE_PROVIDER=gcs)
GCS_PROJECT_ID=
GCS_BUCKET=
GCS_CREDENTIALS_JSON=

# ------------------------------------------------------------------------------
# Optional: Translation Services
# ------------------------------------------------------------------------------

# Lokalise (if TRANSLATION_PROVIDER=lokalise)
LOKALISE_API_KEY=
LOKALISE_PROJECT_ID=

# Phrase (if TRANSLATION_PROVIDER=phrase)
PHRASE_API_KEY=
PHRASE_PROJECT_ID=

# ------------------------------------------------------------------------------
# Notes
# ------------------------------------------------------------------------------

# 1. Never commit .env to version control
# 2. Use strong, unique values for all secrets
# 3. Rotate secrets regularly (every 90 days recommended)
# 4. Use different values for development, staging, and production
# 5. Store production secrets in Cloudflare Workers secrets:
#    wrangler secret put SECRET_NAME
# 6. Document any new environment variables in this file
